

<!doctype html>
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en" class="no-js"> <!--<![endif]-->
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Book Review - Python Testing Cookbook by Greg L. Turnquist | Do. Reflect. Learn. Repeat!</title>
  <meta name="description" content="Excercises in public learning">
  <meta name="author" content="Peter Zsoldos">

  <link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://feeds.feedburner.com/zsoldosp" />
  <link rel="shortcut icon" href="/favicon.ico">
  <link href="/css/reset.css" media="screen" rel="stylesheet" type="text/css" /> 
  <link href="/css/main.css" media="screen" rel="stylesheet" type="text/css" /> 

</head>

  <body>
    <div id="header">
      <div class="inner">
                <ul>
                    <li><a href="https://twitter.com/zsepi">@zsepi</a></li>
                    <li><a href="/about.html">about me</a></li>
                    <li><a href="/category/software/">software</a></li>
                    <li><a href="/category/outdoors/">outdoors</a></li>
                </ul>
                <h1><a href="/">Do. Reflect. Learn. Repeat!</a></h1>
                <h2>Excercises in public learning</h2>
      </div>
    </div>
    <div id="content">
        <div class="inner">
            




<div class="post">
    <h3><a href="/2011/10/book-review-python-testing-cookbook-by.html/">Book Review - Python Testing Cookbook by Greg L. Turnquist</a></h3>
  
    <div class="body">
        
<p>I have been doing (developer) automated testing for years now, but I recently moved from <a href="http://www.microsoft.com/net/">.NET</a> to <a href="http://www.python.org/">Python</a>. Recently, at one point I suggested to collegues that we try <a href="http://concordion.org/">Concordion</a>, only to learn that there is the <a href="http://docs.python.org/library/doctest.html"><code>doctest module</code></a> that could be used to achieve similar result (more about that in a later post). Remembering my own advice: <a href="/2010/12/when-in-rome-do-as-romans-do.html">When In Rome, Do as the Romans Do</a>, I set out looking for a Python specific book about testing - and the <a href="http://www.packtpub.com/python-testing-cookbook/book">Python Testing Cookbook</a> by <a href="http://pythontestingcookbook.posterous.com/">Greg L. Turnquist</a> book seemed to be a good fit <a href="http://streamhacker.com/2011/07/18/python-testing-cookbook-review/">based on reviews</a>.</p><br/><hr/><br/><p>Overall, I liked the book, and it lived up to my expectations - it provided me with a list of tools and some sample code to get started with each of them. </p><br/><p>Beware that it is an entry level book - if, like me, you are already familiar with the testing concepts, and are looking for a book to learn about advanced testing concepts, theories, this book might be too little for you (or just read through the "There is more" sections of the recipies). But it is great for someone new to testing - though discussions with (and code reviews by) someone experienced in testing should accompany the reading.</p><br/><p>Despite the below criticisms, which are meant to be rather a companion to the book than an advice against it (i.e.: probably the only book I wouldn't find anything missing from and nothing to criticise about would be written for me, in real time, based on my immediate needs). The fact that the list is short shows how I found the rest of the book valuable, with great advices that go beyond the cookbook format (why you shouldn't use <code>fail()</code>, why there should be one assert per test, etc.). While I don't see eye to eye on each topic with the book, but just as the book is not written in a "my way or the highway" style, I will not get into minor differrences of opinion.</p><br/><h2>Format of the book</h2><br/><p>Each chapter explores a topic, with multiple specific recipes. Each recipe is relatively self contained, so if we are in a hurry and need to get to the solution of one specific problem without reading the whole book/chapter, it's possible. However, for those reading whole chapters, this results in a bit of repetition - I had to fight the urge to just gloss over the code I (thought) I had seen before. </p><br/><p>Each recepie follows the format of </p><br/><ul><br/><li>stating the problem</li><br/><li>showing code that solves it</li><br/><li>explaining how the code works</li><br/><li>and finally, providing warnings about pitfalls and problems in the code, and some further advice</li><br/></ul><br/><p>While this format is easy to follow, it has a few drawbacks.</p><br/><ul><br/><li>until I got used to this style, I often found myself cursing out loud like the <a href="http://www.osnews.com/story/19266/WTFs_m">code reviewers in this comic</a> while reading the code that will later be explained to be bad/antipattern. </li><br/><li>each recipe has a lot of additional testing insight, potentially unrelated to the tool being demonstrated - but one can miss these, thinking "oh, I know all about doctest, I'll just skip that chapter"</li><br/><li>for people in a hurry, just scanning the cookbook and copying (typing up) the code - there is nothing to indicate in the code that there is an antipattern there, only in the later paragrpahs - which you might not read when in a hurry. Just thinking about the examples where the unit tests have no asserts but only print statements gives me the shivers (and it's even used for illustration in the chapter about Continious Integration!).</li><br/></ul><br/><h2>What was missing from the book</h2><br/><ul><br/><li>About testing legacy code, I was missing two things: <ul><br/><li>a pointer to Michael Feather's classic book, <a href="http://www.amazon.com/Working-Effectively-Legacy-Michael-Feathers/dp/0131177052">Working Effectively with Legacy Code</a></li><br/><li>a warning about a mistake I have seen almost everyone (myself included) make when getting started with testing legacy code: don't write tests just because you can - only add cases for the area you are working on and only add enough to cover your current needs. This is hinted at, but I've found it's important to state it explicitly.</li><br/></ul><br/></li><br/><li>Notes about test maintainability <ul><br/><li>I strongly disagree with the approach of having one test class per physical class, and test methods directly excercising the class's method. I've found these can lead to maintainability problems down the road, so I prefer to introduce helper abstractions (e.g.: <code>assert_roman_numeral_conversion(expected_result, roman_numeral_string)</code> method) for most of my tests, and organize test methods by logical scenarios instead of mirroring code organizational units (on successful login, validating user input, etc.). These abstraction (indirections) makes it easier to update tests after an API change or refactoring. It might sound like an advanced topic, but I think it's a key concept for effective tests, and one that people should be exposed to early (just after they've made the mental jump from throwaway main methods with visual/human assertions to automated tests with automated assertions).</li><br/><li>Acceptance Testing - it is notoriously difficult for us programmers to <a href="http://blog.objectmentor.com/articles/2009/12/07/writing-maintainable-automated-acceptance-tests">write good acceptance tests</a> that are both maintainable and readable by the customers. I'm rather sure that in the example given in the book, the customers would not be interested in knowing which html tag contains the price in the output. </li><br/></ul><br/></li><br/></ul><br/><h2>Minor criticisms</h2><br/><ul><br/><li>there is an inconsistent level of detail and further pointers. E.g.: while <code>optparse</code> is explained in detail, <code>virtualenv</code> and <code>setuptools</code> are glossed over.</li><br/><li>In addition to the assertless test methods, the other thing that shocked me was the example in the doctest module that - to illustrate that the test works - introduced a bug in the test code. While the fact that test is code and thus can be buggy should be emphasized, but that wasn't the case here. This could leave the reader wondering why exactly we introduced the bug in the test code - aren't we testing the application?</li><br/><li>The book is careful not to fall into the trap of elitist speak that might alienate people, but saying that coupling and cohesiveness are subjective terms is just providing gunpowder to unwinnable arguments(*).</li><br/></ul><br/><h2>Interesting notes</h2><br/><ul><br/><li>This might be a cultural thing (I'm coming from .NET), but I've found it rather surprising that such an entry level book talks about test runners, and write custom test runners. It's useful knowledge, just something that I have not seen mentioned in so much detail in the Java/.NET world so early. Maybe it's got to do with IDEs being more widespread, where running a subset of the tests is easy.</li><br/></ul><br/><p>As said, the book lives up to the expectations, so if you would like to get a quick and practical introduction to testing in pytohn - both tools and concepts, I can recommend this one for you.</p><br/><hr/><br/><p>(*) Reminds me of a story from long ago. The team in question has decided to use bind variables for all SQL invocations (I've said it's been some time ago) to prevent SQL Injection. The one programmer wrote a stored procedure that concatenated the SQL command in its body... and argued that this is just a matter of style. At least the procedure was invoked from the application using bind parameters...</p>

    </div>
    <div class="meta">
        <p>What do you think? I would love if you would <strong>leave a comment</strong> - drop me an <strong>email</strong> at <strong><a href="mailto:hello@zsoldosp.eu">hello@zsoldosp.eu</a></strong>, tell me on <a href="https://twitter.com/intent/tweet?url=http://blog.zsoldosp.eu/2011/10/book-review-python-testing-cookbook-by.html&text=@zsepi, in response to Book Review - Python Testing Cookbook by Greg L. Turnquist">Twitter</a>!
    </div>
    <div class="meta">
        <p>Posted on <a href="/2011/10/book-review-python-testing-cookbook-by.html/">October 23, 2011 at 01:24 PM</a> in <span class="blog_post_categories"><a href='/category/python/'>python</a>, <a href='/category/testing/'>testing</a>, <a href='/category/book-review/'>book review</a>, <a href='/category/software/'>software</a></span></p>
        <p>Share this post if you liked it - on 
<a href="http://digg.com/submit?url=http://blog.zsoldosp.eu/2011/10/book-review-python-testing-cookbook-by.html">Digg</a>,
<a href="http://facebook.com/sharer.php?u=http://blog.zsoldosp.eu/2011/10/book-review-python-testing-cookbook-by.html">Facebook</a>, 
<a href="https://plus.google.com/share?url=http://blog.zsoldosp.eu/2011/10/book-review-python-testing-cookbook-by.html">Google+</a>, 
<a href="http://reddit.com/submit?url=http://blog.zsoldosp.eu/2011/10/book-review-python-testing-cookbook-by.html&title=Book Review - Python Testing Cookbook by Greg L. Turnquist">reddit</a>,
or
<a href="https://twitter.com/intent/tweet?url=http://blog.zsoldosp.eu/2011/10/book-review-python-testing-cookbook-by.html&text=Book Review - Python Testing Cookbook by Greg L. Turnquist&via=zsepi">Twitter</a>

 
    </p>
    </div>
    


        </div>
    </div>
        <div id="footer" class="clearfix">
            <div class="inner">
                <div class="about">
                    <h3><a href="/about.html">About Me</a></h3>
                    
                    <a href="/about.html"><img src="/img/me_small.jpg" alt="ME" /></a>
                    <div>
                        I'm a software developer and outdoors enthusiast among other things. <a href="/about.html">Read more</a>
                    </div>
                </div>
            <div class="about">
                <p>Powered by <a href="http://www.blogofile.com">Blogofile</a></p>
                <p>Template from <a href="https://github.com/jamesyu/jamesyu_jekyll_template">James Yu's Jekyll template</a>

<p>This is a personal weblog. The opinions expressed here are my own and not necessarily reflect those of my - current or former - employers'.

<p>All posts - unless noted otherwise - are licensed under a Creative Commons Attribution-Noncommercial-Share Alike 3.0 License.

<a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="license"><img alt="Creative Commons License" style="border-width: 0pt;" src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" /></a></p>
                
            </div>
        </div>
  <script>
      if(window.location.href.indexOf("http://blog.zsoldosp.eu") != -1) {
          var _gaq=[['_setAccount','UA-1962998-2'],['_trackPageview']];
          (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.async=1;
          g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
          s.parentNode.insertBefore(g,s)}(document,'script'));
      }
  </script>
    </body> 
</html>

